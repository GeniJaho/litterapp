import{r as h,s as ne,k as T,x as N,y as _e,z as se,A as J,B as be,F as ue,D as Se,E as Oe,m as X,G as $e,o as O,c as z,w as $,a as u,b as n,u as le,t as K,T as De,d as E,g as ce,n as ee,e as H,f as Z,q as Ie,H as Q,i as ae,P as Ce}from"./app-CZNMuXyv.js";import{_ as Le,a as xe,b as he}from"./AppLayout-B-_1m5wu.js";import{_ as te}from"./PrimaryButton-Dv3cuahV.js";import{o as R,d as Fe,u as W,f as Pe,c as j,w as Te,a as Re,h as Ue,t as je,i as ie,e as Ae,b as Ee,E as Be,g as Me,A as re,T as ze,j as pe,s as Ne,l as He,N as ye,k as Ke,O as qe,m as L,_ as Y}from"./TagBox-D1H7U3OL.js";import{_ as C}from"./InputLabel-ChgMnCjb.js";import{_ as oe}from"./TextInput-BUY0sAWZ.js";import Je from"./BulkTag-BXyDVRET.js";import{Z as Ge,T as We}from"./ZoomIcon-DZLgk69i.js";import{_ as Qe}from"./ConfirmDeleteButton-Bl8rpGu-.js";import{T as ve}from"./Tooltip-BZhMXdVp.js";import{_ as Ye}from"./Modal-B-odY7TB.js";import{_ as Ze}from"./ToggleInput-DtATc2LJ.js";import Xe from"./BulkRemoveItemsAndTags-DJzLrGtK.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SecondaryButton-BuvT1BGe.js";import"./NewPhotoItem-XcVfsy5x.js";import"./IconDangerButton-Ck-pzSvo.js";import"./BulkTagModal-BYXA9oO-.js";import"./TagShortcutBox-lA1C6f4w.js";import"./SimpleTagShortcutItem-Bp4iMjuy.js";import"./TagSelector-C_R_7AZ0.js";import"./DangerButton-SEmbVtR3.js";import"./ConfirmationModal-Z4ZutyjG.js";let we=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function ke(l){var b,s;let i=(b=l.innerText)!=null?b:"",t=l.cloneNode(!0);if(!(t instanceof HTMLElement))return i;let m=!1;for(let k of t.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))k.remove(),m=!0;let e=m?(s=t.innerText)!=null?s:"":i;return we.test(e)&&(e=e.replace(we,"")),e}function el(l){let b=l.getAttribute("aria-label");if(typeof b=="string")return b.trim();let s=l.getAttribute("aria-labelledby");if(s){let i=s.split(" ").map(t=>{let m=document.getElementById(t);if(m){let e=m.getAttribute("aria-label");return typeof e=="string"?e.trim():ke(m).trim()}return null}).filter(Boolean);if(i.length>0)return i.join(", ")}return ke(l).trim()}function ll(l){let b=h(""),s=h("");return()=>{let i=R(l);if(!i)return"";let t=i.innerText;if(b.value===t)return s.value;let m=el(i).trim().toLowerCase();return b.value=t,s.value=m,m}}function tl(l,b){return l===b}var al=(l=>(l[l.Open=0]="Open",l[l.Closed=1]="Closed",l))(al||{}),ol=(l=>(l[l.Single=0]="Single",l[l.Multi=1]="Multi",l))(ol||{}),sl=(l=>(l[l.Pointer=0]="Pointer",l[l.Other=1]="Other",l))(sl||{});function ul(l){requestAnimationFrame(()=>requestAnimationFrame(l))}let Ve=Symbol("ListboxContext");function de(l){let b=$e(Ve,null);if(b===null){let s=new Error(`<${l} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,de),s}return b}let il=ne({name:"Listbox",emits:{"update:modelValue":l=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>tl},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(l,{slots:b,attrs:s,emit:i}){let t=h(1),m=h(null),e=h(null),k=h(null),S=h([]),_=h(""),V=h(null),r=h(1);function v(a=c=>c){let c=V.value!==null?S.value[V.value]:null,x=qe(a(S.value.slice()),o=>R(o.dataRef.domRef)),w=c?x.indexOf(c):null;return w===-1&&(w=null),{options:x,activeOptionIndex:w}}let D=T(()=>l.multiple?1:0),[F,I]=Fe(T(()=>l.modelValue),a=>i("update:modelValue",a),T(()=>l.defaultValue)),P=T(()=>F.value===void 0?W(D.value,{1:[],0:void 0}):F.value),A={listboxState:t,value:P,mode:D,compare(a,c){if(typeof l.by=="string"){let x=l.by;return(a==null?void 0:a[x])===(c==null?void 0:c[x])}return l.by(a,c)},orientation:T(()=>l.horizontal?"horizontal":"vertical"),labelRef:m,buttonRef:e,optionsRef:k,disabled:T(()=>l.disabled),options:S,searchQuery:_,activeOptionIndex:V,activationTrigger:r,closeListbox(){l.disabled||t.value!==1&&(t.value=1,V.value=null)},openListbox(){l.disabled||t.value!==0&&(t.value=0)},goToOption(a,c,x){if(l.disabled||t.value===1)return;let w=v(),o=Pe(a===j.Specific?{focus:j.Specific,id:c}:{focus:a},{resolveItems:()=>w.options,resolveActiveIndex:()=>w.activeOptionIndex,resolveId:d=>d.id,resolveDisabled:d=>d.dataRef.disabled});_.value="",V.value=o,r.value=x??1,S.value=w.options},search(a){if(l.disabled||t.value===1)return;let c=_.value!==""?0:1;_.value+=a.toLowerCase();let x=(V.value!==null?S.value.slice(V.value+c).concat(S.value.slice(0,V.value+c)):S.value).find(o=>o.dataRef.textValue.startsWith(_.value)&&!o.dataRef.disabled),w=x?S.value.indexOf(x):-1;w===-1||w===V.value||(V.value=w,r.value=1)},clearSearch(){l.disabled||t.value!==1&&_.value!==""&&(_.value="")},registerOption(a,c){let x=v(w=>[...w,{id:a,dataRef:c}]);S.value=x.options,V.value=x.activeOptionIndex},unregisterOption(a){let c=v(x=>{let w=x.findIndex(o=>o.id===a);return w!==-1&&x.splice(w,1),x});S.value=c.options,V.value=c.activeOptionIndex,r.value=1},theirOnChange(a){l.disabled||I(a)},select(a){l.disabled||I(W(D.value,{0:()=>a,1:()=>{let c=N(A.value.value).slice(),x=N(a),w=c.findIndex(o=>A.compare(x,N(o)));return w===-1?c.push(x):c.splice(w,1),c}}))}};Te([e,k],(a,c)=>{var x;A.closeListbox(),Re(c,Ue.Loose)||(a.preventDefault(),(x=R(e))==null||x.focus())},T(()=>t.value===0)),_e(Ve,A),je(T(()=>W(t.value,{0:ie.Open,1:ie.Closed})));let B=T(()=>{var a;return(a=R(e))==null?void 0:a.closest("form")});return se(()=>{J([B],()=>{if(!B.value||l.defaultValue===void 0)return;function a(){A.theirOnChange(l.defaultValue)}return B.value.addEventListener("reset",a),()=>{var c;(c=B.value)==null||c.removeEventListener("reset",a)}},{immediate:!0})}),()=>{let{name:a,modelValue:c,disabled:x,form:w,...o}=l,d={open:t.value===0,disabled:x,value:P.value};return be(ue,[...a!=null&&P.value!=null?Ae({[a]:P.value}).map(([U,p])=>be(Ee,Be({features:Me.Hidden,key:U,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:w,disabled:x,name:U,value:p}))):[],re({ourProps:{},theirProps:{...s,...ze(o,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:d,slots:b,attrs:s,name:"Listbox"})])}}}),nl=ne({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(l,{attrs:b,slots:s,expose:i}){var t;let m=(t=l.id)!=null?t:`headlessui-listbox-button-${pe()}`,e=de("ListboxButton");i({el:e.buttonRef,$el:e.buttonRef});function k(r){switch(r.key){case L.Space:case L.Enter:case L.ArrowDown:r.preventDefault(),e.openListbox(),X(()=>{var v;(v=R(e.optionsRef))==null||v.focus({preventScroll:!0}),e.value.value||e.goToOption(j.First)});break;case L.ArrowUp:r.preventDefault(),e.openListbox(),X(()=>{var v;(v=R(e.optionsRef))==null||v.focus({preventScroll:!0}),e.value.value||e.goToOption(j.Last)});break}}function S(r){switch(r.key){case L.Space:r.preventDefault();break}}function _(r){e.disabled.value||(e.listboxState.value===0?(e.closeListbox(),X(()=>{var v;return(v=R(e.buttonRef))==null?void 0:v.focus({preventScroll:!0})})):(r.preventDefault(),e.openListbox(),ul(()=>{var v;return(v=R(e.optionsRef))==null?void 0:v.focus({preventScroll:!0})})))}let V=Ne(T(()=>({as:l.as,type:b.type})),e.buttonRef);return()=>{var r,v;let D={open:e.listboxState.value===0,disabled:e.disabled.value,value:e.value.value},{...F}=l,I={ref:e.buttonRef,id:m,type:V.value,"aria-haspopup":"listbox","aria-controls":(r=R(e.optionsRef))==null?void 0:r.id,"aria-expanded":e.listboxState.value===0,"aria-labelledby":e.labelRef.value?[(v=R(e.labelRef))==null?void 0:v.id,m].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:k,onKeyup:S,onClick:_};return re({ourProps:I,theirProps:F,slot:D,attrs:b,slots:s,name:"ListboxButton"})}}}),rl=ne({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(l,{attrs:b,slots:s,expose:i}){var t;let m=(t=l.id)!=null?t:`headlessui-listbox-options-${pe()}`,e=de("ListboxOptions"),k=h(null);i({el:e.optionsRef,$el:e.optionsRef});function S(r){switch(k.value&&clearTimeout(k.value),r.key){case L.Space:if(e.searchQuery.value!=="")return r.preventDefault(),r.stopPropagation(),e.search(r.key);case L.Enter:if(r.preventDefault(),r.stopPropagation(),e.activeOptionIndex.value!==null){let v=e.options.value[e.activeOptionIndex.value];e.select(v.dataRef.value)}e.mode.value===0&&(e.closeListbox(),X(()=>{var v;return(v=R(e.buttonRef))==null?void 0:v.focus({preventScroll:!0})}));break;case W(e.orientation.value,{vertical:L.ArrowDown,horizontal:L.ArrowRight}):return r.preventDefault(),r.stopPropagation(),e.goToOption(j.Next);case W(e.orientation.value,{vertical:L.ArrowUp,horizontal:L.ArrowLeft}):return r.preventDefault(),r.stopPropagation(),e.goToOption(j.Previous);case L.Home:case L.PageUp:return r.preventDefault(),r.stopPropagation(),e.goToOption(j.First);case L.End:case L.PageDown:return r.preventDefault(),r.stopPropagation(),e.goToOption(j.Last);case L.Escape:r.preventDefault(),r.stopPropagation(),e.closeListbox(),X(()=>{var v;return(v=R(e.buttonRef))==null?void 0:v.focus({preventScroll:!0})});break;case L.Tab:r.preventDefault(),r.stopPropagation();break;default:r.key.length===1&&(e.search(r.key),k.value=setTimeout(()=>e.clearSearch(),350));break}}let _=He(),V=T(()=>_!==null?(_.value&ie.Open)===ie.Open:e.listboxState.value===0);return()=>{var r,v;let D={open:e.listboxState.value===0},{...F}=l,I={"aria-activedescendant":e.activeOptionIndex.value===null||(r=e.options.value[e.activeOptionIndex.value])==null?void 0:r.id,"aria-multiselectable":e.mode.value===1?!0:void 0,"aria-labelledby":(v=R(e.buttonRef))==null?void 0:v.id,"aria-orientation":e.orientation.value,id:m,onKeydown:S,role:"listbox",tabIndex:0,ref:e.optionsRef};return re({ourProps:I,theirProps:F,slot:D,attrs:b,slots:s,features:ye.RenderStrategy|ye.Static,visible:V.value,name:"ListboxOptions"})}}}),dl=ne({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(l,{slots:b,attrs:s,expose:i}){var t;let m=(t=l.id)!=null?t:`headlessui-listbox-option-${pe()}`,e=de("ListboxOption"),k=h(null);i({el:k,$el:k});let S=T(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===m:!1),_=T(()=>W(e.mode.value,{0:()=>e.compare(N(e.value.value),N(l.value)),1:()=>N(e.value.value).some(a=>e.compare(N(a),N(l.value)))})),V=T(()=>W(e.mode.value,{1:()=>{var a;let c=N(e.value.value);return((a=e.options.value.find(x=>c.some(w=>e.compare(N(w),N(x.dataRef.value)))))==null?void 0:a.id)===m},0:()=>_.value})),r=ll(k),v=T(()=>({disabled:l.disabled,value:l.value,get textValue(){return r()},domRef:k}));se(()=>e.registerOption(m,v)),Se(()=>e.unregisterOption(m)),se(()=>{J([e.listboxState,_],()=>{e.listboxState.value===0&&_.value&&W(e.mode.value,{1:()=>{V.value&&e.goToOption(j.Specific,m)},0:()=>{e.goToOption(j.Specific,m)}})},{immediate:!0})}),Oe(()=>{e.listboxState.value===0&&S.value&&e.activationTrigger.value!==0&&X(()=>{var a,c;return(c=(a=R(k))==null?void 0:a.scrollIntoView)==null?void 0:c.call(a,{block:"nearest"})})});function D(a){if(l.disabled)return a.preventDefault();e.select(l.value),e.mode.value===0&&(e.closeListbox(),X(()=>{var c;return(c=R(e.buttonRef))==null?void 0:c.focus({preventScroll:!0})}))}function F(){if(l.disabled)return e.goToOption(j.Nothing);e.goToOption(j.Specific,m)}let I=Ke();function P(a){I.update(a)}function A(a){I.wasMoved(a)&&(l.disabled||S.value||e.goToOption(j.Specific,m,0))}function B(a){I.wasMoved(a)&&(l.disabled||S.value&&e.goToOption(j.Nothing))}return()=>{let{disabled:a}=l,c={active:S.value,selected:_.value,disabled:a},{value:x,disabled:w,...o}=l,d={id:m,ref:k,role:"option",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,"aria-selected":_.value,disabled:void 0,onClick:D,onFocus:F,onPointerenter:P,onMouseenter:P,onPointermove:A,onMousemove:A,onPointerleave:B,onMouseleave:B};return re({ourProps:d,theirProps:o,slot:c,attrs:s,slots:b,name:"ListboxOption"})}}});const vl={class:"relative"},cl={class:"block truncate"},pl={key:0,class:"absolute inset-y-0 left-0 flex items-center pl-3 text-indigo-600"},G={__name:"SelectInput",props:{modelValue:Object,options:Array},emits:["update:modelValue"],setup(l,{emit:b}){const s=b;return(i,t)=>(O(),z(le(il),{modelValue:l.modelValue,"onUpdate:modelValue":t[0]||(t[0]=m=>s("update:modelValue",m)),by:"label"},{default:$(()=>[u("div",vl,[n(le(nl),{class:"relative w-full cursor-default rounded-md bg-white dark:bg-gray-900 py-1.5 pl-3 pr-10 text-left text-gray-900 dark:text-gray-300 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-600 sm:text-sm sm:leading-6"},{default:$(()=>{var m;return[u("span",cl,K((m=l.modelValue)==null?void 0:m.label),1),t[1]||(t[1]=u("span",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},[u("svg",{class:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[u("path",{"fill-rule":"evenodd",d:"M10 3a.75.75 0 01.55.24l3.25 3.5a.75.75 0 11-1.1 1.02L10 4.852 7.3 7.76a.75.75 0 01-1.1-1.02l3.25-3.5A.75.75 0 0110 3zm-3.76 9.2a.75.75 0 011.06.04l2.7 2.908 2.7-2.908a.75.75 0 111.1 1.02l-3.25 3.5a.75.75 0 01-1.1 0l-3.25-3.5a.75.75 0 01.04-1.06z","clip-rule":"evenodd"})])],-1))]}),_:1}),n(De,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:$(()=>[n(le(rl),{class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black/5 focus:outline-none sm:text-sm"},{default:$(()=>[(O(!0),E(ue,null,ce(l.options,m=>(O(),z(le(dl),{key:m.label,value:m,as:"template"},{default:$(({active:e,selected:k})=>[u("li",{class:ee([e?"bg-indigo-600 text-white":"text-gray-900","relative cursor-default select-none py-2 pl-10 pr-4"])},[u("span",{class:ee([k?"font-medium":"font-normal","block truncate"])},K(m.label),3),k?(O(),E("span",pl,t[2]||(t[2]=[u("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[u("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z","clip-rule":"evenodd"})],-1)]))):H("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"]))}},ml={class:"flex flex-col lg:flex-row lg:space-x-4 w-full px-4 sm:p-0"},fl={class:"w-full"},gl={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"},bl={class:"mt-4 lg:mt-0 flex flex-row lg:flex-col gap-4 items-center justify-center"},xl={__name:"Filters",props:{tags:Object,items:Array,defaultFilters:{type:Object,required:!1}},emits:["change"],setup(l,{emit:b}){var c,x,w,o,d,U,p,M,q,me,fe,ge;const s=l,i=[{label:"-",value:null},{label:"Yes",value:!0},{label:"No",value:!1}],t=h({item_ids:((c=s.defaultFilters)==null?void 0:c.item_ids)??[],tag_ids:((x=s.defaultFilters)==null?void 0:x.tag_ids)??[],uploaded_from:((w=s.defaultFilters)==null?void 0:w.uploaded_from)??null,uploaded_until:((o=s.defaultFilters)==null?void 0:o.uploaded_until)??null,taken_from_local:((d=s.defaultFilters)==null?void 0:d.taken_from_local)??null,taken_until_local:((U=s.defaultFilters)==null?void 0:U.taken_until_local)??null,has_gps:((p=s.defaultFilters)==null?void 0:p.has_gps)??null,is_tagged:((M=s.defaultFilters)==null?void 0:M.is_tagged)??null,picked_up:((q=s.defaultFilters)==null?void 0:q.picked_up)??null,recycled:((me=s.defaultFilters)==null?void 0:me.recycled)??null,deposit:((fe=s.defaultFilters)==null?void 0:fe.deposit)??null}),m=h(((ge=s.defaultFilters)==null?void 0:ge.item_ids.map(f=>s.items.find(g=>g.id===parseInt(f))))??[]),e=h(s.tags.material.filter(f=>t.value.tag_ids.includes(f.id))),k=h(s.tags.brand.filter(f=>t.value.tag_ids.includes(f.id))),S=h(s.tags.event.filter(f=>t.value.tag_ids.includes(f.id))),_=h(s.tags.state.filter(f=>t.value.tag_ids.includes(f.id))),V=h(s.tags.content.filter(f=>t.value.tag_ids.includes(f.id))),r=h(s.tags.size.filter(f=>t.value.tag_ids.includes(f.id))),v=h(i.find(f=>f.value===t.value.has_gps)),D=h(i.find(f=>f.value===t.value.is_tagged)),F=h(i.find(f=>f.value===t.value.picked_up)),I=h(i.find(f=>f.value===t.value.recycled)),P=h(i.find(f=>f.value===t.value.deposit)),A=b,B=()=>{t.value.item_ids=m.value.map(f=>f.id),t.value.tag_ids=[...e.value.map(f=>f.id),...k.value.map(f=>f.id),...S.value.map(f=>f.id),..._.value.map(f=>f.id),...V.value.map(f=>f.id),...r.value.map(f=>f.id)],t.value.has_gps=v.value.value!==null?v.value.value===!0?1:0:null,t.value.is_tagged=D.value.value!==null?D.value.value===!0?1:0:null,t.value.picked_up=F.value.value!==null?F.value.value===!0?1:0:null,t.value.recycled=I.value.value!==null?I.value.value===!0?1:0:null,t.value.deposit=P.value.value!==null?P.value.value===!0?1:0:null,A("change",{...t.value,store_filters:1})},a=()=>{m.value=[],e.value=[],k.value=[],S.value=[],_.value=[],V.value=[],r.value=[],v.value=i[0],D.value=i[0],F.value=i[0],I.value=i[0],P.value=i[0],t.value={item_ids:[],tag_ids:[],uploaded_from:null,uploaded_until:null,taken_from_local:null,taken_until_local:null,has_gps:null,is_tagged:null,picked_up:null,recycled:null,deposit:null},A("change",{...t.value,clear_filters:1})};return(f,g)=>(O(),E("div",ml,[u("div",fl,[u("div",gl,[u("div",null,[n(C,{for:"item-filter",value:"Items"}),n(Y,{id:"item-filter",modelValue:m.value,"onUpdate:modelValue":g[0]||(g[0]=y=>m.value=y),items:l.items,multiple:!0,class:"mt-1 block w-full"},null,8,["modelValue","items"])]),u("div",null,[n(C,{for:"material-filter",value:"Materials"}),n(Y,{id:"material-filter",modelValue:e.value,"onUpdate:modelValue":g[1]||(g[1]=y=>e.value=y),items:l.tags.material,multiple:!0,class:"mt-1 block w-full"},null,8,["modelValue","items"])]),u("div",null,[n(C,{for:"brand-filter",value:"Brands"}),n(Y,{id:"brand-filter",modelValue:k.value,"onUpdate:modelValue":g[2]||(g[2]=y=>k.value=y),items:l.tags.brand,multiple:!0,class:"mt-1 block w-full"},null,8,["modelValue","items"])]),u("div",null,[n(C,{for:"content-filter",value:"Contents"}),n(Y,{id:"content-filter",modelValue:V.value,"onUpdate:modelValue":g[3]||(g[3]=y=>V.value=y),items:l.tags.content,multiple:!0,class:"mt-1 block w-full"},null,8,["modelValue","items"])]),u("div",null,[n(C,{for:"size-filter",value:"Sizes"}),n(Y,{id:"size-filter",modelValue:r.value,"onUpdate:modelValue":g[4]||(g[4]=y=>r.value=y),items:l.tags.size,multiple:!0,class:"mt-1 block w-full"},null,8,["modelValue","items"])]),u("div",null,[n(C,{for:"state-filter",value:"States"}),n(Y,{id:"state-filter",modelValue:_.value,"onUpdate:modelValue":g[5]||(g[5]=y=>_.value=y),items:l.tags.state,multiple:!0,class:"mt-1 block w-full"},null,8,["modelValue","items"])]),u("div",null,[n(C,{for:"event-filter",value:"Events"}),n(Y,{id:"event-filter",modelValue:S.value,"onUpdate:modelValue":g[6]||(g[6]=y=>S.value=y),items:l.tags.event,multiple:!0,class:"mt-1 block w-full"},null,8,["modelValue","items"])]),u("div",null,[n(C,{for:"is-tagged",value:"Is Tagged"}),n(G,{modelValue:D.value,"onUpdate:modelValue":g[7]||(g[7]=y=>D.value=y),options:i,id:"is-tagged",class:"block w-full mt-1"},null,8,["modelValue"])]),u("div",null,[n(C,{for:"uploaded-from",value:"Uploaded From"}),n(oe,{modelValue:t.value.uploaded_from,"onUpdate:modelValue":g[8]||(g[8]=y=>t.value.uploaded_from=y),type:"datetime-local",id:"uploaded-from",class:"mt-1 block w-full dark:[color-scheme:dark]"},null,8,["modelValue"])]),u("div",null,[n(C,{for:"uploaded-until",value:"Uploaded Until"}),n(oe,{modelValue:t.value.uploaded_until,"onUpdate:modelValue":g[9]||(g[9]=y=>t.value.uploaded_until=y),type:"datetime-local",id:"uploaded-until",class:"mt-1 block w-full dark:[color-scheme:dark]"},null,8,["modelValue"])]),u("div",null,[n(C,{for:"taken-from-local",value:"Date taken from (local)"}),n(oe,{modelValue:t.value.taken_from_local,"onUpdate:modelValue":g[10]||(g[10]=y=>t.value.taken_from_local=y),type:"datetime-local",id:"taken-from-local",class:"mt-1 block w-full dark:[color-scheme:dark]"},null,8,["modelValue"])]),u("div",null,[n(C,{for:"taken-until-local",value:"Date taken until (local)"}),n(oe,{modelValue:t.value.taken_until_local,"onUpdate:modelValue":g[11]||(g[11]=y=>t.value.taken_until_local=y),type:"datetime-local",id:"taken-until-local",class:"mt-1 block w-full dark:[color-scheme:dark]"},null,8,["modelValue"])]),u("div",null,[n(C,{for:"has-gps",value:"Has GPS"}),n(G,{modelValue:v.value,"onUpdate:modelValue":g[12]||(g[12]=y=>v.value=y),options:i,id:"has-gps",class:"block w-full mt-1"},null,8,["modelValue"])]),u("div",null,[n(C,{for:"picked_up",value:"Picked Up"}),n(G,{modelValue:F.value,"onUpdate:modelValue":g[13]||(g[13]=y=>F.value=y),options:i,id:"picked_up",class:"block w-full mt-1"},null,8,["modelValue"])]),u("div",null,[n(C,{for:"recycled",value:"Recycled"}),n(G,{modelValue:I.value,"onUpdate:modelValue":g[14]||(g[14]=y=>I.value=y),options:i,id:"recycled",class:"block w-full mt-1"},null,8,["modelValue"])]),u("div",null,[n(C,{for:"deposit",value:"Deposit"}),n(G,{modelValue:P.value,"onUpdate:modelValue":g[15]||(g[15]=y=>P.value=y),options:i,id:"deposit",class:"block w-full mt-1"},null,8,["modelValue"])])])]),u("div",bl,[n(te,{onClick:a},{default:$(()=>g[16]||(g[16]=[Z("Clear")])),_:1}),n(te,{onClick:B},{default:$(()=>g[17]||(g[17]=[Z("Filter")])),_:1})])]))}},hl={class:"flex justify-between relative"},yl={class:"absolute right-0 top-1/2 transform -translate-y-1/2"},wl={class:"py-6 lg:py-16"},kl={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},Sl={class:"flex flex-col sm:flex-row sm:justify-between gap-4 px-4 sm:px-0"},Vl={class:"flex flex-row gap-4"},_l={key:0},Ol={key:1},$l={key:1,class:"mt-6 px-4 sm:px-0 flex flex-col sm:flex-row sm:justify-between gap-4"},Dl={class:"flex items-center text-gray-700 dark:text-white text-sm"},Il={class:"flex flex-row gap-4"},Cl={key:2,class:"mt-6 mb-24"},Ll={class:"p-6 lg:p-8 bg-white dark:bg-gray-800 dark:bg-gradient-to-bl dark:from-gray-700/50 dark:via-transparent border-b border-gray-200 dark:border-gray-700 sm:rounded-lg shadow-xl"},Fl={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4"},Pl=["href","onClick"],Tl=["src","alt"],Rl={key:0,class:"mt-8 flex flex-col sm:flex-row sm:justify-between gap-4"},Ul={class:"bg-white text-blue-500 dark:bg-gray-800 dark:text-white flex items-center justify-center"},jl={class:"flex items-center justify-center"},Al={class:"flex justify-center space-x-2 items-center pt-4 sm:pt-0"},El=["innerHTML"],Bl=["src","alt"],dt={__name:"Index",props:{photos:Object,tags:Object,items:Array,filters:Object,tagShortcuts:Array},setup(l){const b=l,s=h(localStorage.getItem("isSelecting")==="true"||!1),i=h(localStorage.getItem("selectedPhotos")?JSON.parse(localStorage.getItem("selectedPhotos")):[]),t=h(localStorage.getItem("showFilters")==="true"||!1),m=[{label:"25 per page",value:25},{label:"50 per page",value:50},{label:"100 per page",value:100},{label:"200 per page",value:200}],e=h(m.find(o=>o.value===b.photos.per_page)),k=[{label:"Date Uploaded",value:"id"},{label:"Date taken (local)",value:"taken_at_local"},{label:"File name",value:"original_file_name"}],S=[{label:"Ascending",value:"asc"},{label:"Descending",value:"desc"}],_=Ie(),V=h(k.find(o=>o.value===_.props.auth.user.settings.sort_column)||k[0]),r=h(S.find(o=>o.value===_.props.auth.user.settings.sort_direction)||S[1]),v=h(null),D=h(localStorage.getItem("tagShortcutsEnabled")==="true"||!1);J(e,o=>{Q.get(window.location.pathname,{set_per_page:!0,per_page:o.value})}),J(V,o=>{Q.get(window.location.pathname,{set_sort:!0,sort_column:o.value,sort_direction:r.value.value})}),J(r,o=>{Q.get(window.location.pathname,{set_sort:!0,sort_column:V.value.value,sort_direction:o.value})}),J(s,o=>{localStorage.setItem("isSelecting",o?"true":"false")}),J(t,o=>{localStorage.setItem("showFilters",o?"true":"false")}),J(D,o=>{localStorage.setItem("tagShortcutsEnabled",o?"true":"false")});const F=o=>{D.value=o};se(()=>{window.addEventListener("keydown",I)}),Se(()=>{window.removeEventListener("keydown",I)});const I=o=>{(o.ctrlKey||o.metaKey)&&(o.code==="ArrowLeft"&&b.photos.prev_page_url?(o.preventDefault(),Q.visit(b.photos.prev_page_url)):o.code==="ArrowRight"&&b.photos.next_page_url&&(o.preventDefault(),Q.visit(b.photos.next_page_url)))},P=o=>{s.value&&(i.value.includes(o)?i.value=i.value.filter(d=>d!==o):i.value.push(o),localStorage.setItem("selectedPhotos",JSON.stringify(i.value)))},A=o=>{if(!s.value)return;const d=i.value[i.value.length-1],U=b.photos.data.findIndex(q=>q.id===d),p=b.photos.data.findIndex(q=>q.id===o);if(U===-1||p===-1)return;const M=b.photos.data.slice(Math.min(U,p),Math.max(U,p)+1);i.value=M.map(q=>q.id),localStorage.setItem("selectedPhotos",JSON.stringify(i.value))},B=()=>{if(s.value){a();return}s.value=!0},a=()=>{s.value=!1,i.value=[],localStorage.setItem("selectedPhotos",JSON.stringify(i.value))},c=o=>{Q.delete(`/photos/${o}`,{preserveScroll:!0,preserveState:!1})},x=o=>{a(),Q.get(window.location.pathname,o)},w=o=>{window.location.href=route("photos.export",{format:o})};return(o,d)=>(O(),z(Le,{title:"See Your Photos"},{header:$(()=>[u("div",hl,[d[11]||(d[11]=u("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," My Photos ",-1)),u("div",yl,[n(xe,{align:"right",width:"64"},{trigger:$(()=>d[9]||(d[9]=[u("button",{class:"flex items-center justify-center w-8 h-8 border-2 border-transparent rounded-full focus:outline-none focus:border-gray-300 transition"},[u("i",{class:"fas fa-gear text-lg text-gray-800 dark:text-gray-200 mt-0.5 sm:ml-[1px]"})],-1)])),content:$(()=>[u("div",null,[n(Ze,{modelValue:D.value,"onUpdate:modelValue":[d[0]||(d[0]=U=>D.value=U),F],class:"block w-full px-4 py-2"},{label:$(()=>d[10]||(d[10]=[Z("Tag Shortcuts enabled")])),_:1},8,["modelValue"])])]),_:1})])])]),default:$(()=>{var U;return[u("div",wl,[u("div",kl,[u("div",Sl,[u("div",Vl,[n(te,{onClick:d[1]||(d[1]=p=>t.value=!t.value)},{default:$(()=>[Z(K(t.value?"Hide":"Show")+" Filters ",1)]),_:1}),n(te,{onClick:B},{default:$(()=>[s.value?(O(),E("span",_l," Clear Selection "+K(i.value.length?`(${i.value.length})`:""),1)):(O(),E("span",Ol,"Select Photos"))]),_:1}),s.value&&i.value.length?(O(),z(Je,{key:0,photoIds:i.value,tags:l.tags,items:l.items,tagShortcuts:l.tagShortcuts,tagShortcutsEnabled:D.value,onCloseModalWithSuccess:a},null,8,["photoIds","tags","items","tagShortcuts","tagShortcutsEnabled"])):H("",!0),s.value&&i.value.length?(O(),z(Xe,{key:1,photoIds:i.value,tags:l.tags,items:l.items,onCloseModalWithSuccess:a},null,8,["photoIds","tags","items"])):H("",!0)]),u("div",null,[n(xe,{align:"right",width:"36"},{trigger:$(()=>[n(te,{class:"group relative"},{default:$(()=>[n(ve,null,{default:$(()=>d[12]||(d[12]=[u("div",{class:"w-full min-w-32"},[u("div",{class:"dark:text-white"}," Downloads a file with all the items and tags of the photos you have filtered ")],-1)])),_:1}),d[13]||(d[13]=Z(" Export Data "))]),_:1})]),content:$(()=>[n(he,{onClick:d[2]||(d[2]=ae(p=>w("json"),["prevent","stop"]))},{default:$(()=>d[14]||(d[14]=[Z(" JSON ")])),_:1}),n(he,{onClick:d[3]||(d[3]=ae(p=>w("csv"),["prevent","stop"]))},{default:$(()=>d[15]||(d[15]=[Z(" CSV ")])),_:1})]),_:1})])]),t.value?(O(),z(xl,{key:0,onChange:x,tags:l.tags,items:l.items,"default-filters":l.filters,class:"mt-6"},null,8,["tags","items","default-filters"])):H("",!0),l.photos.total?(O(),E("div",$l,[u("div",Dl," Showing "+K(l.photos.from)+" to "+K(l.photos.to)+" of "+K(l.photos.total)+" photos ",1),u("div",Il,[u("div",null,[n(C,{for:"sort-column",value:"Order by"}),n(G,{id:"sort-column",modelValue:V.value,"onUpdate:modelValue":d[4]||(d[4]=p=>V.value=p),options:k,class:"mt-1 block w-full max-w-48 sm:w-48"},null,8,["modelValue"])]),u("div",null,[n(C,{for:"sort-direction",value:"Order Direction"}),n(G,{id:"sort-direction",modelValue:r.value,"onUpdate:modelValue":d[5]||(d[5]=p=>r.value=p),options:S,class:"mt-1 block w-full max-w-36 sm:w-36"},null,8,["modelValue"])])])])):H("",!0),l.photos.data.length?(O(),E("div",Cl,[u("div",Ll,[u("div",Fl,[(O(!0),E(ue,null,ce(l.photos.data,p=>(O(),E("div",{key:p.id,class:"rounded-lg bg-indigo-600 dark:bg-teal-400"},[u("div",{class:ee(["relative overflow-hidden group",s.value&&i.value.includes(p.id)?"scale-[.95]":""])},[u("a",{href:s.value?null:`/photos/${p.id}`,class:ee(s.value?"cursor-cell":"cursor-pointer"),onClick:[ae(M=>A(p.id),["shift","exact"]),ae(M=>P(p.id),["exact"])]},[u("img",{src:p.full_path,alt:p.id,class:"w-full h-64 object-cover rounded-lg",loading:"lazy"},null,8,Tl)],10,Pl),n(Ge,{onClick:M=>v.value=p,class:"absolute top-0 left-0"},null,8,["onClick"]),p.items_exists?(O(),z(We,{key:0,class:"absolute top-2 right-2"})):H("",!0),s.value?H("",!0):(O(),z(Qe,{key:1,onDelete:M=>c(p.id),class:"absolute bottom-2 right-2"},null,8,["onDelete"]))],2)]))),128))]),(U=l.photos.links)!=null&&U.length&&l.photos.last_page>1?(O(),E("div",Rl,[u("div",Ul," Showing "+K(l.photos.from)+" to "+K(l.photos.to)+" of "+K(l.photos.total)+" photos ",1),u("div",jl,[n(G,{modelValue:e.value,"onUpdate:modelValue":d[6]||(d[6]=p=>e.value=p),options:m,class:"w-full max-w-36 sm:w-36"},null,8,["modelValue"])]),u("div",Al,[(O(!0),E(ue,null,ce(l.photos.links,p=>(O(),E("div",{key:p.url,class:"group relative"},[p.url&&p.url===l.photos.prev_page_url?(O(),z(ve,{key:0},{default:$(()=>d[16]||(d[16]=[u("span",{class:"whitespace-nowrap dark:text-white text-xs"},"Ctrl (⌘) + ←",-1)])),_:1})):p.url&&p.url===l.photos.next_page_url?(O(),z(ve,{key:1},{default:$(()=>d[17]||(d[17]=[u("span",{class:"whitespace-nowrap dark:text-white text-xs"},"Ctrl (⌘) + →",-1)])),_:1})):H("",!0),p.url?(O(),z(le(Ce),{key:2,href:p.url,innerHTML:p.label,class:ee(`px-4 py-2 rounded ${p.active?"bg-blue-500 text-white":"bg-white text-blue-500 dark:bg-gray-800 dark:text-white"}`)},null,8,["href","innerHTML","class"])):(O(),E("span",{key:3,innerHTML:p.label,class:ee(`px-4 py-2 rounded ${p.active?"bg-blue-500 text-white":"bg-white text-blue-500 dark:bg-gray-800 dark:text-white"}`)},null,10,El))]))),128))])])):H("",!0),n(Ye,{"max-width":"9xl",onClose:d[8]||(d[8]=p=>v.value=null),show:v.value!==null},{default:$(()=>{var p,M;return[u("img",{src:(p=v.value)==null?void 0:p.full_path,alt:(M=v.value)==null?void 0:M.id,class:"w-full h-full object-contain",onClick:d[7]||(d[7]=q=>v.value=null)},null,8,Bl)]}),_:1},8,["show"])])])):H("",!0)])])]}),_:1}))}};export{dt as default};
