import{k as S,r as _,C as j,z as G,D as O,d as m,b as n,w as o,F as y,o as d,f as a,a as s,t as c,u as r,I as A,g as b,c as V,e as h,n as B}from"./app-CZNMuXyv.js";import{_ as k}from"./SecondaryButton-BuvT1BGe.js";import{_ as T}from"./PrimaryButton-Dv3cuahV.js";import{_ as P}from"./TagBox-D1H7U3OL.js";import Y from"./BulkTagModal-BYXA9oO-.js";import{T as q}from"./Tooltip-BZhMXdVp.js";import H from"./TagSelector-C_R_7AZ0.js";import{_ as J}from"./DangerButton-SEmbVtR3.js";import{_ as Q}from"./ConfirmationModal-Z4ZutyjG.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-B-odY7TB.js";const Z={class:"px-6 py-4 text-lg font-medium text-gray-900 dark:text-gray-100"},ee={class:"mt-4 w-full h-full min-h-96 sm:px-4 flex flex-col md:flex-row"},te={class:"w-full md:w-1/2"},se={class:"flex md:mt-0"},oe={class:"ml-4 mt-0.5"},le={class:"w-full md:w-1/2"},ae={key:0,class:"mt-4"},ie={class:"mt-2"},ne={key:1,class:"mt-4"},de={class:"mt-2"},re={key:0,class:"flex flex-col items-end mt-8 text-sm text-red-500 dark:text-red-430"},me={key:0,class:"flex items-center px-3 text-sm text-gray-700 dark:text-gray-200"},ue={__name:"BulkRemoveItemsAndTags",props:{photoIds:Array,items:Array,tags:Object},emits:["closeModalWithSuccess"],setup(g,{emit:E}){const u=g,D=E,W=S(()=>[...u.tags.material,...u.tags.brand,...u.tags.event,...u.tags.state,...u.tags.content,...u.tags.size]),v=_(null),x=_(!1),p=_(!1),t=j({item_ids:[],tag_ids:[]}),w=_("");G(()=>{window.addEventListener("keydown",M)}),O(()=>{window.removeEventListener("keydown",M)});const I=S(()=>t.processing||!t.item_ids.length&&!t.tag_ids.length),N=()=>{t.item_ids.includes(v.value.id)||t.item_ids.unshift(v.value.id),v.value=null},z=l=>{t.item_ids=t.item_ids.filter(e=>e!==l)},K=l=>{t.tag_ids.includes(l.id)||t.tag_ids.unshift(l.id)},L=l=>{t.tag_ids=t.tag_ids.filter(e=>e!==l)},$=()=>{p.value=!1,t.transform(l=>({...l,photo_ids:u.photoIds})).delete(route("bulk-photo-items.destroy"),{preserveScroll:!0,onSuccess:()=>F()})},F=()=>{t.reset(),w.value="Removed successfully!",setTimeout(()=>{x.value=!1,D("closeModalWithSuccess")},3e3)},R=()=>{x.value=!1,t.reset()},U=()=>{w.value="",x.value=!0},M=l=>{(l.ctrlKey||l.metaKey)&&(l.code==="Enter"||l.code==="ArrowRight")&&!I.value&&(l.preventDefault(),$())};return(l,e)=>(d(),m(y,null,[n(T,{onClick:U},{default:o(()=>e[4]||(e[4]=[a(" Remove Items & Tags ")])),_:1}),n(Y,{"max-width":"3xl",show:x.value,onClose:R},{header:o(()=>[s("div",Z," Remove Items & Tags of Multiple Photos ("+c(g.photoIds.length)+" selected) ",1),e[5]||(e[5]=s("div",{class:"px-6 text-sm text-gray-700 dark:text-gray-200"},[a(" Remove items and tags from multiple photos at once."),s("br"),a(" When you remove an Item, the tags that belong to it will also be removed."),s("br"),a(" When you remove a Tag, it will be removed from all the Items it belongs to."),s("br"),s("br"),a(' After you have selected all the items and tags for removal, click the "Save" button and confirm the dialog that appears. ')],-1))]),content:o(()=>[s("div",ee,[s("div",te,[s("div",se,[n(P,{class:"w-full md:w-96",items:g.items,modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=i=>v.value=i),autofocus:!0,placeholder:"Items"},null,8,["items","modelValue"]),s("div",oe,[n(T,{class:"whitespace-nowrap",onClick:N,disabled:!v.value},{default:o(()=>e[6]||(e[6]=[a(" Remove ")])),_:1},8,["disabled"])])]),n(H,{tags:g.tags,onTagSelected:K},null,8,["tags"])]),s("div",le,[e[9]||(e[9]=s("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-100"}," To Remove ",-1)),r(t).item_ids.length?(d(),m("div",ae,[e[7]||(e[7]=s("h3",{class:"text-md leading-5 font-medium text-gray-900 dark:text-gray-100"}," Items ",-1)),s("div",ie,[n(A,{tag:"div",name:"items",role:"list",class:"flex flex-col gap-3"},{default:o(()=>[(d(!0),m(y,null,b(r(t).item_ids,i=>(d(),V(k,{key:i,onClick:f=>z(i),class:"whitespace-nowrap max-w-min hover:cursor-cross"},{default:o(()=>{var f;return[a(c((f=g.items.find(C=>C.id===i))==null?void 0:f.name),1)]}),_:2},1032,["onClick"]))),128))]),_:1})])])):h("",!0),r(t).tag_ids.length?(d(),m("div",ne,[e[8]||(e[8]=s("h3",{class:"text-md leading-5 font-medium text-gray-900 dark:text-gray-100"}," Tags ",-1)),s("div",de,[n(A,{tag:"div",name:"items",role:"list",class:"flex flex-col gap-3"},{default:o(()=>[(d(!0),m(y,null,b(r(t).tag_ids,i=>(d(),V(k,{key:i,onClick:f=>L(i),class:"whitespace-nowrap max-w-min"},{default:o(()=>{var f;return[a(c((f=W.value.find(C=>C.id===i))==null?void 0:f.name),1)]}),_:2},1032,["onClick"]))),128))]),_:1})])])):h("",!0)])]),r(t).hasErrors?(d(),m("div",re,[(d(!0),m(y,null,b(r(t).errors,i=>(d(),m("p",null,c(i),1))),256))])):h("",!0)]),footer:o(()=>[w.value?(d(),m("div",me,c(w.value),1)):h("",!0),n(k,{onClick:R},{default:o(()=>e[10]||(e[10]=[a(" Cancel ")])),_:1}),n(T,{class:B(["ml-3 group relative",{"opacity-25":r(t).processing}]),disabled:I.value,onClick:e[1]||(e[1]=i=>p.value=!0)},{default:o(()=>[n(q,null,{default:o(()=>e[11]||(e[11]=[s("div",null,[s("div",{class:"whitespace-nowrap dark:text-white"},"Ctrl (⌘) + Enter"),s("div",{class:"whitespace-nowrap dark:text-white"},"Ctrl (⌘) + →")],-1)])),_:1}),e[12]||(e[12]=a(" Save "))]),_:1},8,["class","disabled"])]),_:1},8,["show"]),n(Q,{show:p.value,onClose:e[3]||(e[3]=i=>p.value=!1)},{title:o(()=>e[13]||(e[13]=[a(" Confirm Removal ")])),content:o(()=>[e[14]||(e[14]=a(" Are you sure you want to remove the items and tags from the selected photos?")),e[15]||(e[15]=s("br",null,null,-1)),a(" You have selected "+c(r(t).item_ids.length)+" item(s) and "+c(r(t).tag_ids.length)+" tag(s). ",1)]),footer:o(()=>[n(k,{onClick:e[2]||(e[2]=i=>p.value=!1)},{default:o(()=>e[16]||(e[16]=[a(" Cancel ")])),_:1}),n(J,{class:B(["ml-3",{"opacity-25":r(t).processing}]),disabled:r(t).processing,onClick:$},{default:o(()=>e[17]||(e[17]=[a(" Remove ")])),_:1},8,["class","disabled"])]),_:1},8,["show"])],64))}},Ce=X(ue,[["__scopeId","data-v-873440c7"]]);export{Ce as default};
