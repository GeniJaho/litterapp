import{_ as j}from"./AppLayout-B-_1m5wu.js";import{B as F,q as E,r as b,o as h,d as y,a as o,t as B,e as k,b as f,w as m,f as C,u as O,P as S,c as M}from"./app-CZNMuXyv.js";import{r as V,O as $,c as q,s as z,p as A,F as U,a as I,b as D,d as L,e as G}from"./filepond-plugin-image-preview.min-BHbl_ZvU.js";import{_ as H}from"./PrimaryButton-Dv3cuahV.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/*!
 * vue-filepond v7.0.4
 * A handy FilePond adapter component for Vue
 * 
 * Copyright (c) 2023 PQINA
 * https://pqina.nl/filepond
 * 
 * Licensed under the MIT license.
 */const K=["setOptions","on","off","onOnce","appendTo","insertAfter","insertBefore","isAttachedTo","replaceElement","restoreElement","destroy"],R=z(),X=l=>({string:String,boolean:Boolean,array:Array,function:Function,int:Number,serverapi:Object,object:Object})[l],u={},v=[],x=[];let J={};const Q=(...l)=>{V(...l),v.length=0;for(const e in $){if(/^on/.test(e)){v.push(e);continue}let t=[String,X($[e])];e=="labelFileProcessingError"&&t.push(Function),u[e]={type:t,default:void 0}}return{name:"FilePond",props:u,render(){const e=Object.entries({id:this.id,name:this.name,type:"file",class:this.className,required:this.required,multiple:this.allowMultiple,accept:this.acceptedFileTypes,capture:this.captureMethod}).reduce((t,[s,i])=>(i!==void 0&&(t[s]=i),t),{});return F("div",{class:{"filepond--wrapper":!0}},[F("input",e)])},created(){this.watchers=Object.keys(u).map(e=>this.$watch(e,t=>{this._pond&&(this._pond[e]=t)}))},mounted(){if(!R)return;this._element=this.$el.querySelector("input");const e=v.reduce((s,i)=>(s[i]=(...d)=>{this.$emit("input",this._pond?this._pond.getFiles():[]),this.$emit(i.substr(2),...d)},s),{}),t={};Object.keys(u).forEach(s=>{this[s]!==void 0&&(t[s]=this[s])}),this._pond=q(this._element,Object.assign({},J,e,t)),Object.keys(this._pond).filter(s=>!K.includes(s)).forEach(s=>{this[s]=this._pond[s]}),x.push(this._pond)},beforeUnmount(){const{detached:e}=this.$options;if(!this.$el.offsetParent){e.call(this);return}const t=(i,d)=>{const a=((i[0]||{}).removedNodes||[])[0];!a||!a.contains(this.$el)||(d.disconnect(),e.call(this))};new MutationObserver(t).observe(document.documentElement,{childList:!0,subtree:!0})},detached(){if(this.watchers.forEach(t=>t()),!this._pond)return;this._pond.destroy();const e=x.indexOf(this._pond);e>=0&&x.splice(e,1),this._pond=null}}},W={class:"p-6 lg:p-8 bg-white dark:bg-gray-800 dark:bg-gradient-to-bl dark:from-gray-700/50 dark:via-transparent border-b border-gray-200 dark:border-gray-700"},Y={class:"text-2xl font-medium text-gray-900 dark:text-white flex flex-row justify-between"},Z={key:0},ee={class:"mt-6 text-gray-500 dark:text-gray-400"},te={class:"mt-2"},se={key:0,class:"mb-4 flex justify-center"},oe={__name:"UploadPhotos",setup(l){const e=E(),t=Q(G,L,D,I,U,A),s={url:".",process:{url:"/upload",method:"POST",withCredentials:!1,headers:{"X-CSRF-TOKEN":e.props.csrf_token},timeout:12e4,onload:null,onerror:null,ondata:null},fetch:null,revert:null},i=["image/jpeg","image/jpg","image/png","image/webp",".heic",".heif"],d=(n,r)=>new Promise((c,N)=>{var P;if(r)return c(r);const _=(P=n.name.split(".").pop())==null?void 0:P.toLowerCase();i.find(T=>T.split(".").pop()===_)!==void 0?c("."+_):N("."+_)}),g=b(!0),a=b(0),p=b(null),w=()=>{const n=p.value.getFiles(),r=n.filter(c=>c.status===5);a.value=n.length?r.length/n.length*100:0};return setInterval(()=>{var n;p.value&&(g.value=[0,1,4].includes((n=p.value._pond)==null?void 0:n.status))},1e3),(n,r)=>(h(),y("div",null,[o("div",W,[o("h1",Y,[r[0]||(r[0]=o("span",null,"Drag and drop your photos here",-1)),a.value>0?(h(),y("span",Z,B(a.value.toFixed())+"%",1)):k("",!0)]),r[2]||(r[2]=o("h2",{class:"mt-2 text-sm text-gray-700 dark:text-gray-200"},[o("a",{href:"https://docs.litterapp.net/en/20_Taking-Pictures/",target:"_blank"},[o("i",{class:"fas fa-lightbulb mr-2"}),o("span",{class:"underline"},"Tips for taking and uploading photos")])],-1)),o("div",ee,[o("div",te,[a.value>0?(h(),y("div",se,[f(O(S),{href:n.route("my-photos")},{default:m(()=>[f(H,{disabled:a.value<100&&!g.value},{default:m(()=>r[1]||(r[1]=[C("Go to My Photos")])),_:1},8,["disabled"])]),_:1},8,["href"])])):k("",!0),f(O(t),{name:"photo",ref_key:"pond",ref:p,"allow-multiple":"true","allow-revert":"false","accepted-file-types":i,"file-validate-type-detect-type":d,"file-validate-type-label-expected-types":"Only images are allowed","max-file-size":"20MB","image-transform-output-strip-image-head":"false","image-transform-output-quality":"75","image-resize-target-width":"1024","image-resize-target-height":"1024","image-resize-mode":"contain","image-resize-upscale":"false",server:s,onProcessfile:w,onError:w},null,512)])])])]))}},re={class:"py-12"},ie={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},ne={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg"},he={__name:"Upload",setup(l){return(e,t)=>(h(),M(j,{title:"Upload Photos"},{header:m(()=>t[0]||(t[0]=[o("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," Upload Photos ",-1)])),default:m(()=>[o("div",re,[o("div",ie,[o("div",ne,[f(oe)])])])]),_:1}))}};export{he as default};
