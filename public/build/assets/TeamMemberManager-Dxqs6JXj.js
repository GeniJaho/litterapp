import{C as w,r as C,d as n,b as l,w as s,e as c,o as a,f as i,a as o,u as r,F as T,g as R,n as v,t as b,H,q as J}from"./app-CZNMuXyv.js";import{_ as K}from"./ActionMessage-FOnMwqG7.js";import{_ as A}from"./ActionSection-H-M0v8Yw.js";import{_ as B}from"./ConfirmationModal-Z4ZutyjG.js";import{_ as L}from"./DangerButton-SEmbVtR3.js";import{_ as Q}from"./DialogModal-DrzgfdmU.js";import{_ as W}from"./FormSection-DfBR5Iab.js";import{_ as P}from"./InputError-B5YukZOt.js";import{_ as z}from"./InputLabel-ChgMnCjb.js";import{_ as F}from"./PrimaryButton-Dv3cuahV.js";import{_ as h}from"./SecondaryButton-BuvT1BGe.js";import{S}from"./SectionBorder-BWaHMqhg.js";import{_ as X}from"./TextInput-BUY0sAWZ.js";import"./SectionTitle-B6ds_uDC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-B-odY7TB.js";const Y={key:0},Z={class:"col-span-6 sm:col-span-4"},ee={key:0,class:"col-span-6 lg:col-span-4"},te={class:"relative z-0 mt-1 border border-gray-200 dark:border-gray-700 rounded-lg cursor-pointer"},se=["onClick"],oe={class:"flex items-center"},re={key:0,class:"ml-2 h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},le={class:"mt-2 text-xs text-gray-600 dark:text-gray-400 text-left"},ne={key:1},ae={class:"space-y-6"},ie={class:"text-gray-600 dark:text-gray-400"},me={class:"flex items-center"},de=["onClick"],ue={key:2},ce={class:"space-y-6"},ve={class:"flex items-center"},fe=["src","alt"],ge={class:"ml-4 dark:text-white"},be={class:"flex items-center"},ye=["onClick"],ke={key:1,class:"ml-2 text-sm text-gray-400"},pe=["onClick"],xe={key:0},we={class:"relative z-0 mt-1 border border-gray-200 dark:border-gray-700 rounded-lg cursor-pointer"},Ce=["onClick"],Te={class:"flex items-center"},Re={key:0,class:"ml-2 h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Me={class:"mt-2 text-xs text-gray-600 dark:text-gray-400"},Ue={__name:"TeamMemberManager",props:{team:Object,availableRoles:Array,userPermissions:Object},setup(m){const k=m,d=w({email:"",role:null}),f=w({role:null}),M=w({}),$=w({}),p=C(!1),_=C(null),x=C(!1),y=C(null),V=()=>{d.post(route("team-members.store",k.team),{errorBag:"addTeamMember",preserveScroll:!0,onSuccess:()=>d.reset()})},N=u=>{H.delete(route("team-invitations.destroy",u),{preserveScroll:!0})},O=u=>{_.value=u,f.role=u.membership.role,p.value=!0},E=()=>{f.put(route("team-members.update",[k.team,_.value]),{preserveScroll:!0,onSuccess:()=>p.value=!1})},I=()=>{x.value=!0},U=()=>{M.delete(route("team-members.destroy",[k.team,J().props.auth.user]))},q=u=>{y.value=u},D=()=>{$.delete(route("team-members.destroy",[k.team,y.value]),{errorBag:"removeTeamMember",preserveScroll:!0,preserveState:!0,onSuccess:()=>y.value=null})},j=u=>k.availableRoles.find(e=>e.key===u).name;return(u,e)=>(a(),n("div",null,[m.userPermissions.canAddTeamMembers?(a(),n("div",Y,[l(S),l(W,{onSubmitted:V},{title:s(()=>e[7]||(e[7]=[i(" Add Team Member ")])),description:s(()=>e[8]||(e[8]=[i(" Add a new team member to your team, allowing them to collaborate with you. ")])),form:s(()=>[e[10]||(e[10]=o("div",{class:"col-span-6"},[o("div",{class:"max-w-xl text-sm text-gray-600 dark:text-gray-400"}," Please provide the email address of the person you would like to add to this team. ")],-1)),o("div",Z,[l(z,{for:"email",value:"Email"}),l(X,{id:"email",modelValue:r(d).email,"onUpdate:modelValue":e[0]||(e[0]=t=>r(d).email=t),type:"email",class:"mt-1 block w-full"},null,8,["modelValue"]),l(P,{message:r(d).errors.email,class:"mt-2"},null,8,["message"])]),m.availableRoles.length>0?(a(),n("div",ee,[l(z,{for:"roles",value:"Role"}),l(P,{message:r(d).errors.role,class:"mt-2"},null,8,["message"]),o("div",te,[(a(!0),n(T,null,R(m.availableRoles,(t,g)=>(a(),n("button",{key:t.key,type:"button",class:v(["relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-600",{"border-t border-gray-200 dark:border-gray-700 focus:border-none rounded-t-none":g>0,"rounded-b-none":g!=Object.keys(m.availableRoles).length-1}]),onClick:G=>r(d).role=t.key},[o("div",{class:v({"opacity-50":r(d).role&&r(d).role!=t.key})},[o("div",oe,[o("div",{class:v(["text-sm text-gray-600 dark:text-gray-400",{"font-semibold":r(d).role==t.key}])},b(t.name),3),r(d).role==t.key?(a(),n("svg",re,e[9]||(e[9]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):c("",!0)]),o("div",le,b(t.description),1)],2)],10,se))),128))])])):c("",!0)]),actions:s(()=>[l(K,{on:r(d).recentlySuccessful,class:"mr-3"},{default:s(()=>e[11]||(e[11]=[i(" Added. ")])),_:1},8,["on"]),l(F,{class:v({"opacity-25":r(d).processing}),disabled:r(d).processing},{default:s(()=>e[12]||(e[12]=[i(" Add ")])),_:1},8,["class","disabled"])]),_:1})])):c("",!0),m.team.team_invitations.length>0&&m.userPermissions.canAddTeamMembers?(a(),n("div",ne,[l(S),l(A,{class:"mt-10 sm:mt-0"},{title:s(()=>e[13]||(e[13]=[i(" Pending Team Invitations ")])),description:s(()=>e[14]||(e[14]=[i(" These people have been invited to your team and have been sent an invitation email. They may join the team by accepting the email invitation. ")])),content:s(()=>[o("div",ae,[(a(!0),n(T,null,R(m.team.team_invitations,t=>(a(),n("div",{key:t.id,class:"flex items-center justify-between"},[o("div",ie,b(t.email),1),o("div",me,[m.userPermissions.canRemoveTeamMembers?(a(),n("button",{key:0,class:"cursor-pointer ml-6 text-sm text-red-500 focus:outline-none",onClick:g=>N(t)}," Cancel ",8,de)):c("",!0)])]))),128))])]),_:1})])):c("",!0),m.team.users.length>0?(a(),n("div",ue,[l(S),l(A,{class:"mt-10 sm:mt-0"},{title:s(()=>e[15]||(e[15]=[i(" Team Members ")])),description:s(()=>e[16]||(e[16]=[i(" All of the people that are part of this team. ")])),content:s(()=>[o("div",ce,[(a(!0),n(T,null,R(m.team.users,t=>(a(),n("div",{key:t.id,class:"flex items-center justify-between"},[o("div",ve,[o("img",{class:"w-8 h-8 rounded-full object-cover",src:t.profile_photo_url,alt:t.name},null,8,fe),o("div",ge,b(t.name),1)]),o("div",be,[m.userPermissions.canUpdateTeamMembers&&m.availableRoles.length?(a(),n("button",{key:0,class:"ml-2 text-sm text-gray-400 underline",onClick:g=>O(t)},b(j(t.membership.role)),9,ye)):m.availableRoles.length?(a(),n("div",ke,b(j(t.membership.role)),1)):c("",!0),u.$page.props.auth.user.id===t.id?(a(),n("button",{key:2,class:"cursor-pointer ml-6 text-sm text-red-500",onClick:I}," Leave ")):m.userPermissions.canRemoveTeamMembers?(a(),n("button",{key:3,class:"cursor-pointer ml-6 text-sm text-red-500",onClick:g=>q(t)}," Remove ",8,pe)):c("",!0)])]))),128))])]),_:1})])):c("",!0),l(Q,{show:p.value,onClose:e[2]||(e[2]=t=>p.value=!1)},{title:s(()=>e[17]||(e[17]=[i(" Manage Role ")])),content:s(()=>[_.value?(a(),n("div",xe,[o("div",we,[(a(!0),n(T,null,R(m.availableRoles,(t,g)=>(a(),n("button",{key:t.key,type:"button",class:v(["relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-600",{"border-t border-gray-200 dark:border-gray-700 focus:border-none rounded-t-none":g>0,"rounded-b-none":g!==Object.keys(m.availableRoles).length-1}]),onClick:G=>r(f).role=t.key},[o("div",{class:v({"opacity-50":r(f).role&&r(f).role!==t.key})},[o("div",Te,[o("div",{class:v(["text-sm text-gray-600 dark:text-gray-400",{"font-semibold":r(f).role===t.key}])},b(t.name),3),r(f).role==t.key?(a(),n("svg",Re,e[18]||(e[18]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):c("",!0)]),o("div",Me,b(t.description),1)],2)],10,Ce))),128))])])):c("",!0)]),footer:s(()=>[l(h,{onClick:e[1]||(e[1]=t=>p.value=!1)},{default:s(()=>e[19]||(e[19]=[i(" Cancel ")])),_:1}),l(F,{class:v(["ml-3",{"opacity-25":r(f).processing}]),disabled:r(f).processing,onClick:E},{default:s(()=>e[20]||(e[20]=[i(" Save ")])),_:1},8,["class","disabled"])]),_:1},8,["show"]),l(B,{show:x.value,onClose:e[4]||(e[4]=t=>x.value=!1)},{title:s(()=>e[21]||(e[21]=[i(" Leave Team ")])),content:s(()=>e[22]||(e[22]=[i(" Are you sure you would like to leave this team? ")])),footer:s(()=>[l(h,{onClick:e[3]||(e[3]=t=>x.value=!1)},{default:s(()=>e[23]||(e[23]=[i(" Cancel ")])),_:1}),l(L,{class:v(["ml-3",{"opacity-25":r(M).processing}]),disabled:r(M).processing,onClick:U},{default:s(()=>e[24]||(e[24]=[i(" Leave ")])),_:1},8,["class","disabled"])]),_:1},8,["show"]),l(B,{show:y.value,onClose:e[6]||(e[6]=t=>y.value=null)},{title:s(()=>e[25]||(e[25]=[i(" Remove Team Member ")])),content:s(()=>e[26]||(e[26]=[i(" Are you sure you would like to remove this person from the team? ")])),footer:s(()=>[l(h,{onClick:e[5]||(e[5]=t=>y.value=null)},{default:s(()=>e[27]||(e[27]=[i(" Cancel ")])),_:1}),l(L,{class:v(["ml-3",{"opacity-25":r($).processing}]),disabled:r($).processing,onClick:D},{default:s(()=>e[28]||(e[28]=[i(" Remove ")])),_:1},8,["class","disabled"])]),_:1},8,["show"])]))}};export{Ue as default};
