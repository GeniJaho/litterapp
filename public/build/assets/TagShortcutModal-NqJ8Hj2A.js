import{r as f,H as S,G as x,c as I,w as i,o as d,a as r,t as w,u as o,f as c,i as R,b as u,d as g,n as U,e as p,F as j,g as F,I as A}from"./app-CZNMuXyv.js";import{_ as B}from"./SecondaryButton-BuvT1BGe.js";import D from"./BulkTagModal-BYXA9oO-.js";import{_ as O}from"./TextInput-BUY0sAWZ.js";import{_ as P}from"./InputError-B5YukZOt.js";import{_ as Q}from"./ActionMessage-FOnMwqG7.js";import{_ as k}from"./PrimaryButton-Dv3cuahV.js";import{d as n}from"./index-D4V4tgYl.js";import{_ as G}from"./TagBox-D1H7U3OL.js";import L from"./PivotItem-DjGco3g7.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";let t=f({tagShortcut:null,shortcutName:"",processing:!1,error:"",message:"",setTagShortcut(e){this.tagShortcut=e},setTagShortcutName(e){this.shortcutName=(e==null?void 0:e.shortcut)||""},reloadTagShortcut(){this.tagShortcut&&axios.get(route("tag-shortcuts.show",this.tagShortcut.id)).then(e=>{this.setTagShortcut(e.data.tagShortcut),this.showSavedMessage()})},reset(){this.tagShortcut=null,this.error="",this.message=""},save(){this.processing=!0;const e=this.tagShortcut?route("tag-shortcuts.update",this.tagShortcut.id):route("tag-shortcuts.store");axios.post(e,{shortcut:this.shortcutName}).then(s=>{this.setTagShortcut(s.data.tagShortcut),this.processing=!1,this.error="",this.showSavedMessage()}).catch(s=>{this.processing=!1,this.error=s.response.data.message})},showSavedMessage(){this.message="Saved.",setTimeout(()=>this.message="",2e3)},delete(e){axios.delete(route("tag-shortcuts.destroy",e)).then(()=>S.reload())},copy(e){axios.post(route("tag-shortcuts.copy",e)).then(()=>S.reload())},removeItem(e){axios.delete(route("tag-shortcut-items.destroy",e)).then(()=>t.value.reloadTagShortcut())},copyItem(e){axios.post(route("tag-shortcut-items.copy",e)).then(()=>t.value.reloadTagShortcut())},addTagsToItem(e,s){s.length&&axios.post(route("tag-shortcut-item-tags.store",e.id),{tag_ids:s}).then(()=>t.value.reloadTagShortcut())},removeTagFromItem(e,s){axios.delete(route("tag-shortcut-item-tags.destroy",[e.id,s])).then(()=>t.value.reloadTagShortcut())},toggleItemPickedUp:n((e,s)=>{axios.post(route("tag-shortcut-items.update",e),{picked_up:s}).then(()=>t.value.reloadTagShortcut())},1e3,{leading:!0,trailing:!0}),toggleItemRecycled:n((e,s)=>{axios.post(route("tag-shortcut-items.update",e),{recycled:s}).then(()=>t.value.reloadTagShortcut())},1e3,{leading:!0,trailing:!0}),toggleItemDeposit:n((e,s)=>{axios.post(route("tag-shortcut-items.update",e),{deposit:s}).then(()=>t.value.reloadTagShortcut())},1e3,{leading:!0,trailing:!0}),updateItemQuantity:n((e,s)=>{axios.post(route("tag-shortcut-items.update",e),{quantity:s}).then(()=>t.value.reloadTagShortcut())},1e3,{leading:!0,trailing:!0})});const z={class:"px-6 py-4 text-lg font-medium text-gray-900 dark:text-gray-100"},E={class:"flex flex-row"},H={class:"w-full sm:w-96"},Y={key:0,class:"ml-4"},J={key:0},K={class:"flex flex-row mt-6"},W={class:"ml-4"},X={key:0,class:"mt-8"},Z={class:"mt-2"},tt={__name:"TagShortcutModal",props:{show:{type:Boolean,default:!1}},emits:["close"],setup(e,{expose:s,emit:b}){const N=b,C=x("items"),V=x("tags"),m=f(null),v=f(null),$=()=>{axios.post(route("tag-shortcut-items.store",t.value.tagShortcut.id),{item_id:m.value.id}).then(()=>{m.value=null,t.value.reloadTagShortcut()})},M=n(()=>{t.value.tagShortcut&&t.value.save()},300),_=()=>{N("close")};return s({autofocusName:()=>{t.value.tagShortcut||setTimeout(()=>{var h;return(h=v.value)==null?void 0:h.focus()},100)}}),(h,a)=>(d(),I(D,{"max-width":"9xl",show:e.show,onClose:_},{header:i(()=>[r("div",z,w(o(t).tagShortcut?"Edit":"Add new")+" shortcut ",1),a[3]||(a[3]=r("div",{class:"px-6 text-sm text-gray-700 dark:text-gray-200"},[c(" Add items and tags to the shortcut. You can also set the quantity, and mark it as picked up, recycled, or deposit."),r("br"),r("br"),c(" The shortcut name and items are saved automatically after you create the shortcut. ")],-1))]),content:i(()=>{var y,T;return[r("div",null,[r("form",{onSubmit:a[1]||(a[1]=R((...l)=>o(t).save&&o(t).save(...l),["prevent"]))},[r("div",E,[r("div",H,[u(O,{id:"shortcut",ref_key:"shortcutName",ref:v,modelValue:o(t).shortcutName,"onUpdate:modelValue":a[0]||(a[0]=l=>o(t).shortcutName=l),onInput:o(M),type:"text",class:"block w-full",autocomplete:"shortcut",placeholder:"Shortcut"},null,8,["modelValue","onInput"]),u(P,{message:o(t).error,class:"mt-2"},null,8,["message"])]),o(t).tagShortcut?p("",!0):(d(),g("div",Y,[u(k,{class:U({"opacity-25":o(t).processing}),disabled:o(t).processing},{default:i(()=>a[4]||(a[4]=[c(" Create Shortcut ")])),_:1},8,["class","disabled"])]))])],32),o(t).tagShortcut?(d(),g("div",J,[r("div",K,[u(G,{autofocus:!0,class:"w-full sm:w-96",items:o(C),modelValue:m.value,"onUpdate:modelValue":a[2]||(a[2]=l=>m.value=l),placeholder:"Litter Objects"},null,8,["items","modelValue"]),r("div",W,[u(k,{class:"whitespace-nowrap",onClick:$,disabled:!m.value},{default:i(()=>a[5]||(a[5]=[c(" Add Object ")])),_:1},8,["disabled"])])]),(T=(y=o(t).tagShortcut)==null?void 0:y.tag_shortcut_items)!=null&&T.length?(d(),g("div",X,[a[6]||(a[6]=r("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-100"}," Litter Objects ",-1)),r("div",Z,[u(A,{tag:"ul",name:"items",role:"list",class:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},{default:i(()=>[(d(!0),g(j,null,F(o(t).tagShortcut.tag_shortcut_items,l=>(d(),I(L,{key:l.id,pivotItem:l,tags:o(V),onRemoveItem:ot=>o(t).removeItem(l.id),onAddTagsToItem:o(t).addTagsToItem,onRemoveTagFromItem:o(t).removeTagFromItem,onCopyItem:o(t).copyItem,onTogglePickedUp:o(t).toggleItemPickedUp,onToggleRecycled:o(t).toggleItemRecycled,onToggleDeposit:o(t).toggleItemDeposit,onUpdateQuantity:o(t).updateItemQuantity},null,8,["pivotItem","tags","onRemoveItem","onAddTagsToItem","onRemoveTagFromItem","onCopyItem","onTogglePickedUp","onToggleRecycled","onToggleDeposit","onUpdateQuantity"]))),128))]),_:1})])])):p("",!0)])):p("",!0)])]}),footer:i(()=>[u(Q,{on:o(t).message.length>0,class:"mr-4"},{default:i(()=>[c(w(o(t).message),1)]),_:1},8,["on"]),u(B,{onClick:_},{default:i(()=>a[7]||(a[7]=[c(" Close ")])),_:1})]),_:1},8,["show"]))}},et=q(tt,[["__scopeId","data-v-8316e6af"]]),ht=Object.freeze(Object.defineProperty({__proto__:null,default:et},Symbol.toStringTag,{value:"Module"}));export{et as T,ht as a,t};
